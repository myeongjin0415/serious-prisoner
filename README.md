
## 타임라인 스크립트 커스텀 문법 (링크/트리거/플래그)

`game/01-config/config.js`의 `scripts[]` 문자열 안에 특별한 문법을 쓰면, 게임 실행 시 자동으로 클릭 가능한 링크로 변환됩니다.

### 기본 개념

스크립트 문법은 **3가지 요소**로 구성됩니다:

1. **TimeId**: 시간 칸을 가리키는 ID (형식: `HH-mm`, 예: `08-15`)
2. **ScriptIdx**: 해당 시간 칸의 몇 번째 스크립트인지 (0부터 시작)
3. **Flag (선택)**: 클릭 시 획득하는 플래그 (예: `#CLUE_A`)

---

### 문법 종류

#### 1. 활성 링크 `[...]` - 바로 클릭 가능한 선택지

**언제 쓰나?**  
플레이어가 바로 클릭해서 다른 시간 칸의 스크립트로 이동할 수 있게 하고 싶을 때.

**형식**
```
[표시텍스트:시간 -> 스크립트번호 #플래그]
```

**예시**
```
"침대 옆에 [종이:08-00 -> 1]가 있다."
```
→ 화면에 "종이"가 링크로 보이고, 클릭하면 `08:00` 시간 칸의 1번째 스크립트가 표시됨

```
"[문을 조사한다:18-00 -> 2 #CLUE_A]"
```
→ 클릭하면 `18:00` 칸의 2번째 스크립트로 이동 + `CLUE_A` 플래그 획득

---

#### 2. 비활성 링크 `(...)` - 아직 열리지 않은 선택지

**언제 쓰나?**  
"이 선택지가 있는데 아직 못 누르는" 상태를 보여주고 싶을 때. 나중에 트리거로 활성화됨.

**형식**
```
(표시텍스트:시간 -> 스크립트번호 #플래그)
```

**예시**
```
"'그 아저씨 이름이(맥케이:06-45->1)였나.'"
```
→ 화면에 "맥케이"가 회색 링크로 보이지만 클릭 불가. 나중에 트리거로 활성화 가능.

---

#### 3. 트리거 `[...:...:(라벨)]` - 비활성 링크를 활성화하기

**언제 쓰나?**  
특정 행동을 하면, 다른 스크립트에 있던 비활성 링크를 활성 링크로 바꾸고 싶을 때.

**형식**
```
[표시텍스트:대상시간:대상스크립트번호:(잠금해제할라벨) #플래그]
```

**예시**

**트리거가 있는 스크립트 (08:15 시간 칸, 0번 스크립트):**
```
"언젠가 [이름:08-30:0:(맥케이) #CLUE_B]을 들었던 거 같은데..."
```

**잠겨있는 링크 (08:30 시간 칸, 0번 스크립트 안에 존재):**
```
"'그 아저씨 이름이(맥케이:06-45->1)였나.'"
```

**동작:**
1. 플레이어가 "이름" 링크를 클릭
2. 시스템이 `08:30` 칸의 0번 스크립트를 찾음
3. 그 안에서 `(맥케이:06-45->1)` 패턴을 찾아서
4. `[맥케이:06-45->1]`로 **자동 변환** (잠금 해제!)
5. 이제 "맥케이" 링크를 클릭할 수 있게 됨

---

### 실제 사용 시나리오 예시

**시나리오: 플레이어가 종이를 발견하고, 그 종이를 읽으면 맥케이에 대한 정보가 열림**

```javascript
// 08:00 시간 칸
scripts: [
  "침대 옆에 [종이:08-05 -> 0]가 있다."
]

// 08:05 시간 칸
scripts: [
  "종이를 펼쳐보니 '[이름:08-30:0:(맥케이) #CLUE_B]'라고 적혀있다."
]

// 08:30 시간 칸
scripts: [
  "'그 아저씨 이름이(맥케이:06-45->1)였나.'"
]
```

**플레이 흐름:**
1. 플레이어가 "종이" 링크 클릭 → 08:05 칸으로 이동
2. 플레이어가 "이름" 링크 클릭 → 08:30 칸의 `(맥케이:...)`가 `[맥케이:...]`로 변환됨
3. 이제 플레이어가 "맥케이" 링크를 클릭할 수 있음 → 06:45 칸으로 이동

---

### 주의사항

- TimeId는 반드시 `HH-mm` 형식 (예: `08-15`, `18-00`)
- 표시텍스트에 `[`, `]`, `:` 문자를 쓰면 파싱이 안 될 수 있음
- 트리거의 `LABEL`과 잠금 해제할 링크의 표시텍스트가 **정확히 일치**해야 함

## 스토리 아이디어

- 특정 시간에 어딜 가면, 누가 쪽지를 준다.
- 산책하는 시간에 담을 넘으면 죽는다.
- 조건을 (시간 조건, 가지고 있는 물건 조건) 만족하면 이벤트를 발생시킨다.
- 각각의 인벤토리나 사건들이 독립적인게 아니라, 뭔가 의존하고 있는
    - 타임라인 설계를 잘 해야할 것 같다.
- 시간의 단위.
    - 5일 전.
        - 전체 플레이 타임을 고려했을때 → 역산해서.
    - 실시간성
    - 턴제 플레이
        - 왜냐하면 장소의 이동이 있기 때문에,
- 어떤 활동을 하나?
    - 일
    - 산책
    - 식당
    - 잠자기 옵션. or 밤새기 옵션.
        - 중간에 한번씩 잠을 자야 한다.
        - 밤을 새는것도 하나의 자원. 신중하게 해야한다.
        - 하면 바로 다음날 특정시간으로 스킵된다.
        - status. 규칙.
            - 기력이나
- 단서
    - 인벤토리 기능을 넣자.
    - 자기의 죄가 뭐였는지.
        - 이걸 기억하면은 → 스파이의 존재도 알 수 있게.
    - 어떤 배경인지.
    - 탈출은 어떻게 하는지.
        - 탈출하는 시간 + 탈출할 수 있는 공간 + 탈출할 수 있는 도구.
- 빅브라더같은 (근미래, SF) 독재정권에서 레지스탕스같은 느낌이다.
    - 이 사람이 리더다. 매트릭스.
    - 기억소거 처치 당함.
    - 풍기는 분위기. 감옥이나 간수의 특성 (로봇이다)
    - 이 감옥이 너무 나쁜 분위기여서는 안된다.
        - 감옥 내에서는 어느정도의 자유도도 있어야 함.

# 일정

- -25일 (반) // 개발환경 준비
- -2 (일주일) // 스크립트 살 붙이기 → 구현
- -9 (일주일) // 구현
- -16 (일주일) // 구현 마무리
